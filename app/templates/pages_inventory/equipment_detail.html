{% extends 'base/base.html' %}
{% block title %}‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/equipment_detail.css') }}">

<!-- üîπ ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏ö -->
<h2 class="page-title">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h2>

<div class="detail-container">
  <div class="detail-card">
    <div class="content-row">
      <!-- ‡∏£‡∏π‡∏õ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå -->
      <div class="image-section">
        <img src="{{ url_for('static', filename=item.images[0].image_path if item.images else 'images/no_image.png') }}"
             alt="{{ item.name }}">
      </div>

      <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå -->
      <div class="info-section">
        <h3 class="equip-name">{{ item.name }}</h3>

        <p><strong>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà:</strong> {{ item.category or '-' }}</p>
        <p><strong>‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠:</strong> {{ item.brand or '-' }}</p>
        <p><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> {{ item.detail or '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°' }}</p>
        <p><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong>
          {% if item.status == 'available' %}
            <span class="status available">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
          {% elif item.status == 'in_use' %}
            <span class="status in-use">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ñ‡∏π‡∏Å‡∏¢‡∏∑‡∏°</span>
          {% elif item.status == 'broken' %}
            <span class="status broken">‡∏ä‡∏≥‡∏£‡∏∏‡∏î</span>
          {% elif item.status == 'lost' %}
            <span class="status lost">‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢</span>
          {% else %}
            <span class="status unknown">‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö</span>
          {% endif %}
        </p>

        <p><strong>‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥:</strong>
          {% if item.confirm %}
            ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
          {% else %}
            ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
          {% endif %}
        </p>

        <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong> {{ item.stock_remaining or 0 }}</p>

        <!-- ‡∏õ‡∏∏‡πà‡∏° -->
        <div class="button-group">
          <a href="{{ url_for('inventory.lend_device') }}" class="btn btn-gray">‡∏Å‡∏•‡∏±‡∏ö</a>

          {% if current_user.is_authenticated %}
            <a href="{{ url_for('inventory.lend', codes=item.code, name=item.name, image=item.images[0].image_path if item.images else '') }}" 
               class="btn btn-blue">‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</a>
          {% else %}
            <a href="#" class="btn btn-blue" onclick="showLoginPopup()">‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
function showLoginPopup() {
  Swal.fire({
    icon: 'warning',
    title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö',
    text: '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå',
    confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á'
  }).then(() => {
    window.location.href = "{{ url_for('auth.login_page') }}";
  });
}
</script>
{% endblock %}
